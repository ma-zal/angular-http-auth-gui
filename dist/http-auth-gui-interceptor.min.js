/*! http-auth-gui-interceptor - v1.0.5 */ angular.module("http-auth-gui-interceptor",["http-auth-interceptor","ui.bootstrap"]),angular.module("http-auth-gui-interceptor").run(["$rootScope","popupLoginDialog",function(a,b){a.$on("event:auth-loginRequired",function(){b()})}]),angular.module("http-auth-gui-interceptor").provider("backendAuthService",function(){var a=this;this.backendUrl={getLoggedUser:"/api/auth/login",login:"/api/auth/login",logout:"/api/auth/logout"},this.$get=["$http","$q","authService",function(b,c,d){function e(c,d){return b({method:"POST",url:a.backendUrl.login,data:{username:c,password:d}}).then(function(a){return a.data})}function f(){return b({method:"GET",url:a.backendUrl.logout})}function g(){return b({method:"GET",url:a.backendUrl.getLoggedUser}).then(function(a){return a.data})}function h(a,b){return e(a,b).then(function(a){k(a),d.loginConfirmed(m)})}function i(){return f().then(function(a){k({}),d.loginConfirmed({})})}function j(){return l?l:null===l?c.resolve(m):void 0===l?l=g().then(function(a){return k(a),d.loginConfirmed(a),l=null,m}):void 0}function k(a){var b;for(b in m)m.hasOwnProperty(b)&&delete m[b];angular.extend(m,a)}var l,m={};return{login:h,logout:i,getLoggedUser:j}}]}),angular.module("http-auth-gui-interceptor").controller("LoginDialogCtrl",["$uibModalInstance","$timeout","$filter","backendAuthService","authService",function(a,b,c,d,e){function f(){h.working=!0,h.error=null,d.login(h.loginFormValues.username,h.loginFormValues.password).then(function(){a.dismiss()})["catch"](function(a){h.loginFormValues.password="",h.working=!1,h.error=a&&a.data&&a.data.err?a.data.err:"#ERR_UNKNOWN";try{h.error=c("translate")(h.error)}catch(d){}b(function(){var a=document.getElementById("login_password");a&&a.focus()})})}function g(){a.dismiss("cancelledByUser"),e.loginCancelled(null,"cancelledByUser")}var h=this;h.loginFormValues={username:"",password:""},h.working=!1,h.error=null,h.login=f,h.cancelLogin=g,b(function(){var a=document.getElementById("login_username");a&&a.focus()},200)}]),angular.module("http-auth-gui-interceptor").factory("popupLoginDialog",["$uibModal",function(a){var b;return function(){(!b||b.result.$$state.status>0)&&(b=a.open({templateUrl:"bower_components/angular-http-auth-gui/src/login-dialog.html",animation:!1,size:"md",controller:"LoginDialogCtrl",controllerAs:"loginDialogCtrl",backdrop:"static",keyboard:!1}))}}]),angular.module("http-auth-gui-interceptor").run(["$templateCache",function(a){"use strict";a.put("bower_components/angular-http-auth-gui/src/login-dialog.html",'<div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Enter login credentials</h3></div><div class="panel-body"><div data-ng-show="loginDialogCtrl.error" class="bs-callout bs-callout-danger" role="alert"><h4>Error</h4>{{loginDialogCtrl.error}}</div><br class="hidden-xs"><form name="loginForm" class="form-horizontal" data-ng-submit="loginDialogCtrl.login()"><fieldset><div class="input-group col-sm-8 col-sm-offset-2"><span class="input-group-addon"><i class="fa fa-fw fa-user"></i></span> <input id="login_username" name="username" type="text" placeholder="Username" class="form-control input-md" autocomplete="on" data-ng-disabled="loginDialogCtrl.working" data-ng-model="loginDialogCtrl.loginFormValues.username"></div><br><div class="input-group col-sm-8 col-sm-offset-2"><span class="input-group-addon"><i class="fa fa-fw fa-lock"></i></span> <input id="login_password" name="password" type="password" placeholder="Password" class="form-control input-md" autocomplete="on" data-ng-disabled="loginDialogCtrl.working" data-ng-model="loginDialogCtrl.loginFormValues.password"></div><br><div class="input-group text-right col-sm-8 col-sm-offset-2"><button data-ng-disabled="loginDialogCtrl.working || !loginDialogCtrl.loginFormValues.username || !loginDialogCtrl.loginFormValues.password" type="submit" id="login_send" name="login_send" class="btn btn-success"><span data-ng-hide="loginDialogCtrl.working"><i class="fa fa-fw fa-check"></i> Login</span> <span data-ng-show="loginDialogCtrl.working"><i class="fa fa-fw fa-circle-o-notch fa-spin"></i> Loging in ...</span></button> <button type="button" id="cancelbutton" class="btn btn-link" data-ng-disabled="working" data-ng-click="loginDialogCtrl.cancelLogin()"><i class="fa fa-times"></i> Cancel</button></div></fieldset></form></div></div>')}]);